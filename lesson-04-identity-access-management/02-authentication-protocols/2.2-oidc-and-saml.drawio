<mxfile host="65bd71144e">
    <diagram name="OIDC and SAML" id="oidc-saml">
        <mxGraphModel dx="1770" dy="786" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="🔑 OpenID Connect (OIDC) &amp; SAML 2.0 - Authentication Protocols" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#1a1a2e;" parent="1" vertex="1">
                    <mxGeometry x="350" y="20" width="900" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-container" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="80" width="750" height="500" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-title" value="OpenID Connect (OIDC)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=20;fontStyle=1;fontColor=#1565c0;" parent="1" vertex="1">
                    <mxGeometry x="280" y="90" width="300" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-subtitle" value="Identity Layer on top of OAuth 2.0 - &quot;Authentication Protocol&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=2;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="230" y="115" width="400" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-layers" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#1976d2;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="70" y="145" width="300" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-layer-title" value="OIDC = OAuth 2.0 + Identity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#1565c0;" parent="1" vertex="1">
                    <mxGeometry x="110" y="150" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-outer" value="OpenID Connect" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=11;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="90" y="175" width="260" height="75" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-inner" value="OAuth 2.0&#xa;(Authorization)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#90caf9;fontSize=11;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="110" y="195" width="220" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-adds" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#1976d2;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="390" y="145" width="390" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-adds-title" value="OIDC Adds to OAuth 2.0:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#1565c0;" parent="1" vertex="1">
                    <mxGeometry x="405" y="150" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add1" value="ID Token (JWT)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="405" y="175" width="100" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add2" value="UserInfo Endpoint" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="515" y="175" width="110" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add3" value="Standard Scopes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="635" y="175" width="100" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add4" value="Discovery/.well-known" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="405" y="220" width="130" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add5" value="Standard Claims" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="545" y="220" width="100" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-add6" value="Session Mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="655" y="220" width="90" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="id-token-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#43a047;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="70" y="280" width="350" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="id-token-title" value="🎫 ID Token (JWT)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#2e7d32;" parent="1" vertex="1">
                    <mxGeometry x="160" y="285" width="170" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-structure" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#66bb6a;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="85" y="315" width="320" height="135" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-header" value="Header (alg, typ)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#ef5350;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="95" y="325" width="130" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-payload" value="Payload (Claims)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#66bb6a;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="95" y="355" width="130" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-sig" value="Signature" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#64b5f6;fontSize=10;fontStyle=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="95" y="385" width="130" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-claims" value="Standard Claims:&#xa;iss - Issuer&#xa;sub - Subject (user ID)&#xa;aud - Audience (client)&#xa;exp - Expiration time&#xa;iat - Issued at&#xa;nonce - Replay protection" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="240" y="320" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="jwt-example" value="eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOi...&lt;signature&gt;" style="text;html=1;strokeColor=none;fillColor=#c8e6c9;align=center;verticalAlign=middle;fontSize=9;fontColor=#2e7d32;fontFamily=Courier New;rounded=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="95" y="420" width="295" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-scopes-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ff8f00;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="440" y="280" width="340" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-scopes-title" value="📋 Standard OIDC Scopes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#e65100;" parent="1" vertex="1">
                    <mxGeometry x="510" y="285" width="200" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-h1" value="Scope" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ff8f00;strokeColor=#e65100;fontColor=#ffffff;fontStyle=1;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="315" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-h2" value="Claims Returned" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ff8f00;strokeColor=#e65100;fontColor=#ffffff;fontStyle=1;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="315" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r1c1" value="openid" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;fontStyle=1;fontColor=#e65100;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="340" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r1c2" value="sub (required for OIDC)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="340" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r2c1" value="profile" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;fontStyle=1;fontColor=#e65100;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="365" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r2c2" value="name, family_name, given_name, picture, locale..." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="365" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r3c1" value="email" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;fontStyle=1;fontColor=#e65100;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="390" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r3c2" value="email, email_verified" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="390" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r4c1" value="phone" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;fontStyle=1;fontColor=#e65100;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="415" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r4c2" value="phone_number, phone_number_verified" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="415" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r5c1" value="address" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;fontStyle=1;fontColor=#e65100;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="455" y="440" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="scope-r5c2" value="address (JSON object)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="535" y="440" width="230" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-flow-title" value="OIDC Authentication Flow (Authorization Code)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#1565c0;" parent="1" vertex="1">
                    <mxGeometry x="70" y="475" width="350" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-flow" value="1. Client redirects to /authorize?response_type=code&amp;scope=openid profile email&#xa;2. User authenticates at IdP&#xa;3. IdP redirects back with authorization code&#xa;4. Client exchanges code for tokens (ID Token + Access Token)&#xa;5. Client validates ID Token signature and claims → User authenticated!" style="text;html=1;strokeColor=none;fillColor=#e3f2fd;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;rounded=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="70" y="495" width="710" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="saml-container" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#c2185b;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="820" y="80" width="730" height="500" as="geometry"/>
                </mxCell>
                <mxCell id="saml-title" value="SAML 2.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=20;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1080" y="90" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="saml-subtitle" value="Security Assertion Markup Language - &quot;Enterprise SSO Standard&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=2;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="960" y="115" width="440" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="saml-comp" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e91e63;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="145" width="690" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="saml-comp-title" value="SAML Terminology" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="855" y="150" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="saml-idp" value="Identity Provider (IdP)&#xa;Authenticates users&#xa;Issues assertions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#e91e63;fontSize=10;fontStyle=0;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="855" y="175" width="130" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="saml-sp" value="Service Provider (SP)&#xa;Your application&#xa;Relies on IdP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#e91e63;fontSize=10;fontStyle=0;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1000" y="175" width="130" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="saml-assertion" value="Assertion&#xa;XML document with&#xa;user info &amp; attributes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#e91e63;fontSize=10;fontStyle=0;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1145" y="175" width="130" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="saml-binding" value="Binding&#xa;How messages are&#xa;transmitted (POST, Redirect)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#e91e63;fontSize=10;fontStyle=0;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1290" y="175" width="140" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="saml-flow-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e91e63;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="235" width="690" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="saml-flow-title" value="SAML SP-Initiated SSO Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1050" y="240" width="250" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="sf-user" value="User" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ff8f00;fontStyle=1;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="870" y="275" width="70" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="sf-sp" value="SP (App)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#e91e63;fontStyle=1;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1030" y="275" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="sf-idp" value="IdP" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;fontStyle=1;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="275" width="70" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="sf-line1" value="" style="endArrow=none;html=1;strokeColor=#bdbdbd;strokeWidth=1;dashed=1;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="905" y="300" as="sourcePoint"/>
                        <mxPoint x="905" y="420" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-line2" value="" style="endArrow=none;html=1;strokeColor=#bdbdbd;strokeWidth=1;dashed=1;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1070" y="300" as="sourcePoint"/>
                        <mxPoint x="1070" y="420" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-line3" value="" style="endArrow=none;html=1;strokeColor=#bdbdbd;strokeWidth=1;dashed=1;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1335" y="300" as="sourcePoint"/>
                        <mxPoint x="1335" y="420" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s1" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="910" y="315" as="sourcePoint"/>
                        <mxPoint x="1065" y="315" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s1-label" value="1. Access protected resource" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="920" y="302" width="140" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="sf-s2" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1075" y="335" as="sourcePoint"/>
                        <mxPoint x="1330" y="335" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s2-label" value="2. Redirect with SAML AuthnRequest (base64 XML)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1100" y="322" width="200" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="sf-s3" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1330" y="355" as="sourcePoint"/>
                        <mxPoint x="910" y="355" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s3-label" value="3. Login form" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1100" y="342" width="80" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="sf-s4" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="910" y="375" as="sourcePoint"/>
                        <mxPoint x="1330" y="375" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s4-label" value="4. User authenticates" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1070" y="362" width="120" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="sf-s5" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1330" y="395" as="sourcePoint"/>
                        <mxPoint x="1075" y="395" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s5-label" value="5. POST SAML Response (signed Assertion)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1100" y="382" width="200" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="sf-s6" value="" style="endArrow=classic;html=1;strokeColor=#c2185b;strokeWidth=2;shadow=1;curved=1;flowAnimation=1;jumpStyle=arc" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1065" y="415" as="sourcePoint"/>
                        <mxPoint x="910" y="415" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="sf-s6-label" value="6. Access granted" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="940" y="402" width="100" height="12" as="geometry"/>
                </mxCell>
                <mxCell id="saml-assert-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e91e63;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="445" width="330" height="105" as="geometry"/>
                </mxCell>
                <mxCell id="saml-assert-title" value="SAML Assertion Structure (XML)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="900" y="450" width="210" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="saml-xml" value="&lt;saml:Assertion&gt;&#xa;  &lt;saml:Issuer&gt;https://idp.example.com&lt;/saml:Issuer&gt;&#xa;  &lt;ds:Signature&gt;...&lt;/ds:Signature&gt;&#xa;  &lt;saml:Subject&gt;user@example.com&lt;/saml:Subject&gt;&#xa;  &lt;saml:Conditions NotBefore=&quot;...&quot; NotOnOrAfter=&quot;...&quot;/&gt;&#xa;  &lt;saml:AttributeStatement&gt;...&lt;/saml:AttributeStatement&gt;&#xa;&lt;/saml:Assertion&gt;" style="text;html=1;strokeColor=none;fillColor=#fce4ec;align=left;verticalAlign=top;fontSize=9;fontColor=#424242;fontFamily=Courier New;rounded=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="855" y="470" width="300" height="75" as="geometry"/>
                </mxCell>
                <mxCell id="saml-sec-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e91e63;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1190" y="445" width="340" height="105" as="geometry"/>
                </mxCell>
                <mxCell id="saml-sec-title" value="SAML Security Features" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="1265" y="450" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="saml-sec-list" value="✓ Digital Signatures (XML Signature)&#xa;✓ Encryption (XML Encryption)&#xa;✓ Expiration timestamps (NotBefore/NotOnOrAfter)&#xa;✓ Audience restriction&#xa;✓ Replay prevention (assertion ID)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="1205" y="475" width="310" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="compare-container" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eceff1;strokeColor=#546e7a;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="600" width="1500" height="260" as="geometry"/>
                </mxCell>
                <mxCell id="compare-title" value="Protocol Comparison: OAuth 2.0 vs OIDC vs SAML 2.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=18;fontStyle=1;fontColor=#37474f;" parent="1" vertex="1">
                    <mxGeometry x="550" y="610" width="500" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ct-h1" value="Feature" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#546e7a;strokeColor=#455a64;fontColor=#ffffff;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="650" width="180" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-h2" value="OAuth 2.0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ff8f00;strokeColor=#e65100;fontColor=#ffffff;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="650" width="280" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-h3" value="OpenID Connect" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1565c0;strokeColor=#0d47a1;fontColor=#ffffff;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="650" width="300" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-h4" value="SAML 2.0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c2185b;strokeColor=#880e4f;fontColor=#ffffff;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="650" width="320" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-h5" value="When to Use" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#2e7d32;strokeColor=#1b5e20;fontColor=#ffffff;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="650" width="360" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r1c1" value="Purpose" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#bdbdbd;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="685" width="180" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r1c2" value="Authorization (delegated access)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="685" width="280" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r1c3" value="Authentication + Authorization" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#bbdefb;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="685" width="300" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r1c4" value="Authentication (enterprise SSO)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#f8bbd0;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="685" width="320" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r1c5" value="OAuth: API access only&#xa;OIDC: Modern apps, SSO&#xa;SAML: Enterprise SSO, legacy" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=9;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="685" width="360" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r2c1" value="Data Format" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#bdbdbd;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="720" width="180" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r2c2" value="JSON" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="720" width="280" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r2c3" value="JSON + JWT" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#bbdefb;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="720" width="300" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r2c4" value="XML" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#f8bbd0;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="720" width="320" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r2c5" value="JSON/JWT: Simpler, smaller payload&#xa;XML: Verbose but mature" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=9;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="720" width="360" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r3c1" value="Token Type" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#bdbdbd;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="755" width="180" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r3c2" value="Access Token (opaque or JWT)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="755" width="280" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r3c3" value="ID Token (JWT) + Access Token" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#bbdefb;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="755" width="300" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r3c4" value="SAML Assertion (XML)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#f8bbd0;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="755" width="320" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r3c5" value="ID Token: Authenticated identity&#xa;Access Token: API permissions" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=9;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="755" width="360" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r4c1" value="Best For" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#bdbdbd;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="790" width="180" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r4c2" value="API access, third-party apps, mobile" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="790" width="280" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r4c3" value="Modern web apps, SPAs, mobile, SSO" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#bbdefb;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="790" width="300" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r4c4" value="Enterprise SSO, legacy integration" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#f8bbd0;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="790" width="320" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r4c5" value="New apps: Use OIDC&#xa;Enterprise with SAML IdPs: SAML&#xa;API only: OAuth" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=9;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="790" width="360" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r5c1" value="Complexity" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#bdbdbd;fontStyle=1;fontSize=11;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="825" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r5c2" value="Medium" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffe0b2;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="260" y="825" width="280" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r5c3" value="Medium" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#bbdefb;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="540" y="825" width="300" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r5c4" value="High (XML complexity)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#f8bbd0;fontSize=10;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="825" width="320" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ct-r5c5" value="OIDC preferred for new development" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=9;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="825" width="360" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="discovery-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e0f2f1;strokeColor=#00695c;strokeWidth=2;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="880" width="1500" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="discovery-title" value="Discovery &amp; Configuration Endpoints" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=18;fontStyle=1;fontColor=#00695c;" parent="1" vertex="1">
                    <mxGeometry x="600" y="890" width="400" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-disc" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#00897b;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="925" width="700" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-disc-title" value="OIDC Discovery (.well-known/openid-configuration)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#00695c;" parent="1" vertex="1">
                    <mxGeometry x="230" y="930" width="400" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-disc-url" value="https://login.microsoftonline.com/{tenant}/v2.0/.well-known/openid-configuration" style="text;html=1;strokeColor=none;fillColor=#b2dfdb;align=center;verticalAlign=middle;fontSize=10;fontColor=#00695c;fontFamily=Courier New;rounded=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="150" y="960" width="500" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-disc-content" value="Returns JSON with:&#xa;• issuer - Token issuer identifier&#xa;• authorization_endpoint - Where to send auth requests&#xa;• token_endpoint - Where to exchange codes for tokens&#xa;• userinfo_endpoint - Where to get user profile&#xa;• jwks_uri - Public keys for token validation&#xa;• scopes_supported - Available scopes&#xa;• response_types_supported - Supported flows" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="100" y="985" width="350" height="95" as="geometry"/>
                </mxCell>
                <mxCell id="oidc-disc-benefit" value="Benefits:&#xa;✓ Auto-configure clients&#xa;✓ Key rotation handling&#xa;✓ Dynamic endpoint discovery&#xa;✓ Standard across providers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="510" y="985" width="230" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="saml-meta" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#00897b;strokeWidth=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="810" y="925" width="710" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="saml-meta-title" value="SAML Metadata (XML)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#00695c;" parent="1" vertex="1">
                    <mxGeometry x="1030" y="930" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="saml-meta-url" value="https://login.microsoftonline.com/{tenant}/federationmetadata/2007-06/federationmetadata.xml" style="text;html=1;strokeColor=none;fillColor=#b2dfdb;align=center;verticalAlign=middle;fontSize=9;fontColor=#00695c;fontFamily=Courier New;rounded=1;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="860" y="960" width="550" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="saml-meta-content" value="Contains XML with:&#xa;• EntityID - IdP/SP identifier&#xa;• SingleSignOnService - SSO endpoints&#xa;• SingleLogoutService - Logout endpoints&#xa;• X509Certificate - Signing/encryption certs&#xa;• NameIDFormat - Supported name formats&#xa;• AssertionConsumerService - Response URLs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="830" y="985" width="300" height="95" as="geometry"/>
                </mxCell>
                <mxCell id="saml-meta-benefit" value="Configuration:&#xa;• Import metadata for easy setup&#xa;• Exchange between IdP &amp; SP&#xa;• Certificate management&#xa;• Trust establishment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="985" width="230" height="80" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>