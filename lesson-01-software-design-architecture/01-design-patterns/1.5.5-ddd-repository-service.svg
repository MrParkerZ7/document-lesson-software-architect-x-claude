<svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1153px" height="711px" viewBox="-0.5 -0.5 1153 711" content="&lt;mxfile&gt;&lt;diagram id=&quot;repository-service&quot; name=&quot;Repository and Domain Service&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs><clipPath id="mx-clip-35-185-252-20-0"><rect x="35" y="185" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-205-252-20-0"><rect x="35" y="205" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-225-252-20-0"><rect x="35" y="225" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-245-252-20-0"><rect x="35" y="245" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-265-252-20-0"><rect x="35" y="265" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-336-252-20-0"><rect x="35" y="336" width="252" height="20"/></clipPath><clipPath id="mx-clip-35-364-252-18-0"><rect x="35" y="364" width="252" height="18"/></clipPath><clipPath id="mx-clip-35-382-252-18-0"><rect x="35" y="382" width="252" height="18"/></clipPath><clipPath id="mx-clip-35-400-252-20-0"><rect x="35" y="400" width="252" height="20"/></clipPath><clipPath id="mx-clip-695-175-272-22-0"><rect x="695" y="175" width="272" height="22"/></clipPath><clipPath id="mx-clip-695-197-272-22-0"><rect x="695" y="197" width="272" height="22"/></clipPath><clipPath id="mx-clip-695-219-272-26-0"><rect x="695" y="219" width="272" height="26"/></clipPath><clipPath id="mx-clip-995-175-122-50-0"><rect x="995" y="175" width="122" height="50"/></clipPath></defs><g><g><rect x="321" y="0" width="500" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 498px; height: 1px; padding-top: 20px; margin-left: 322px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #333333; "><div style="display: inline-block; font-size: 24px; font-family: &quot;Helvetica&quot;; color: light-dark(#333333, #c1c1c1); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Repository and Domain Service Patterns</div></div></div></foreignObject><text x="571" y="27" fill="#333333" font-family="&quot;Helvetica&quot;" font-size="24px" text-anchor="middle" font-weight="bold">Repository and Domain Service Patterns</text></switch></g></g><g><rect x="1" y="60" width="620" height="380" rx="57" ry="57" fill="#f8cecc" stroke="#b85450" stroke-width="3" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><rect x="241" y="70" width="140" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 90px; margin-left: 242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #b85450; "><div style="display: inline-block; font-size: 22px; font-family: &quot;Helvetica&quot;; color: light-dark(#b85450, #d7817e); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">REPOSITORY</div></div></div></foreignObject><text x="311" y="97" fill="#b85450" font-family="&quot;Helvetica&quot;" font-size="22px" text-anchor="middle" font-weight="bold">REPOSITORY</text></switch></g></g><g><rect x="81" y="105" width="460" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 458px; height: 1px; padding-top: 118px; margin-left: 82px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Mediates between the domain and data mapping layers, providing a collection-like interface for accessing aggregates</div></div></div></foreignObject><text x="311" y="121" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle">Mediates between the domain and data mapping layers, providing a collection-like in...</text></switch></g></g><g><path d="M 31 185 L 31 145 L 291 145 L 291 185" fill="#ffffff" stroke="#b85450" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/><path d="M 31 185 L 31 285 L 291 285 L 291 185" fill="none" stroke="#b85450" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/><path d="M 31 185 L 291 185" fill="none" stroke="#b85450" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-weight="bold" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="160.5" y="162.5">&lt;&lt;interface&gt;&gt;</text><text x="160.5" y="176.5">OrderRepository</text></g></g><g><rect x="31" y="185" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-185-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="198.5">+ findById(id: OrderId): Order</text></g></g><g><rect x="31" y="205" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-205-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="218.5">+ findByCustomer(id: CustomerId): List&lt;Order&gt;</text></g></g><g><rect x="31" y="225" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-225-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="238.5">+ save(order: Order): void</text></g></g><g><rect x="31" y="245" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-245-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="258.5">+ delete(order: Order): void</text></g></g><g><rect x="31" y="265" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-265-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="278.5">+ nextId(): OrderId</text></g></g><g><path d="M 31 336 L 31 310 L 291 310 L 291 336" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 31 336 L 31 420 L 291 420 L 291 336" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 31 336 L 291 336" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-weight="bold" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="160.5" y="327.5">SqlOrderRepository</text></g></g><g><rect x="31" y="336" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-35-336-252-20-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="349.5">- dbContext: DbContext</text></g></g><g><path d="M 31 360 L 291 360" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><rect x="31" y="364" width="260" height="18" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-style="italic" clip-path="url(#mx-clip-35-364-252-18-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="376.5">+ findById(id): // SQL/ORM logic</text></g></g><g><rect x="31" y="382" width="260" height="18" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-style="italic" clip-path="url(#mx-clip-35-382-252-18-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="36.5" y="394.5">+ save(order): // persist to DB</text></g></g><g><rect x="31" y="400" width="260" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#999999" font-family="&quot;Helvetica&quot;" font-style="italic" clip-path="url(#mx-clip-35-400-252-20-0)" font-size="10px" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106));"><text x="36.5" y="413.5">// maps domain ↔ persistence</text></g></g><g><path d="M 161 310 L 161 295.24" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 161 287.24 L 165 295.24 L 157 295.24 Z" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><rect x="171" y="290" width="60" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 300px; margin-left: 172px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 9px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">implements</div></div></div></foreignObject><text x="201" y="303" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="9px" text-anchor="middle">implements</text></switch></g></g><g><rect x="381" y="145" width="140" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 158px; margin-left: 382px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #b85450; "><div style="display: inline-block; font-size: 14px; font-family: &quot;Helvetica&quot;; color: light-dark(#b85450, #d7817e); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Repository Rules</div></div></div></foreignObject><text x="451" y="162" fill="#b85450" font-family="&quot;Helvetica&quot;" font-size="14px" text-anchor="middle" font-weight="bold">Repository Rules</text></switch></g></g><g><rect x="331" y="175" width="260" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 190px; margin-left: 343px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">✓ One repository per Aggregate<br />✓ Returns complete Aggregates only<br />✓ Domain-centric interface (not data-centric)<br />✓ Hides persistence mechanism<br />✓ No queries for internal entities<br />✓ Works with Aggregate Roots only</div></div></div></foreignObject><text x="343" y="200" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px">✓ One repository per Aggregate...</text></switch></g></g><g><rect x="361" y="295" width="180" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 308px; margin-left: 362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #b85450; "><div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: light-dark(#b85450, #d7817e); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Anti-Patterns (Don't Do):</div></div></div></foreignObject><text x="451" y="311" fill="#b85450" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle" font-weight="bold">Anti-Patterns (Don't Do):</text></switch></g></g><g><rect x="331" y="325" width="260" height="95" rx="14.25" ry="14.25" fill="#ffcccc" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 204, 204), rgb(87, 43, 43));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 340px; margin-left: 343px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">✗ Generic Repository for everything<br />✗ Exposing IQueryable to domain<br />✗ findOrderLineById() - internal entity!<br />✗ Complex query methods<br />✗ Business logic in repository</div></div></div></foreignObject><text x="343" y="350" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px">✗ Generic Repository for everything...</text></switch></g></g><g><rect x="661" y="60" width="480" height="380" rx="57" ry="57" fill="#e1d5e7" stroke="#9673a6" stroke-width="3" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><rect x="801" y="70" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 90px; margin-left: 802px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #9673a6; "><div style="display: inline-block; font-size: 22px; font-family: &quot;Helvetica&quot;; color: light-dark(#9673a6, #9577a3); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">DOMAIN SERVICE</div></div></div></foreignObject><text x="901" y="97" fill="#9673a6" font-family="&quot;Helvetica&quot;" font-size="22px" text-anchor="middle" font-weight="bold">DOMAIN SERVICE</text></switch></g></g><g><rect x="741" y="105" width="320" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 118px; margin-left: 742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Stateless operations that don't naturally fit within an Entity or Value Object</div></div></div></foreignObject><text x="901" y="121" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle">Stateless operations that don't naturally fit within an En...</text></switch></g></g><g><path d="M 691 175 L 691 145 L 971 145 L 971 175" fill="#ffffff" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/><path d="M 691 175 L 691 245 L 971 245 L 971 175" fill="none" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/><path d="M 691 175 L 971 175" fill="none" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-weight="bold" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="830.5" y="162.5">PricingService (Domain Service)</text></g></g><g><rect x="691" y="175" width="280" height="22" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-695-175-272-22-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="696.5" y="189.5">+ calculateTotal(order: Order): Money</text></g></g><g><rect x="691" y="197" width="280" height="22" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-695-197-272-22-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="696.5" y="211.5">+ applyDiscount(order: Order, code: string): void</text></g></g><g><rect x="691" y="219" width="280" height="26" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-695-219-272-26-0)" font-size="10px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="696.5" y="235.5">+ calculateTax(order: Order, region: Region): Money</text></g></g><g><path d="M 991 175 L 991 145 L 1121 145 L 1121 175" fill="#ffffff" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/><path d="M 991 175 L 991 225 L 1121 225 L 1121 175" fill="none" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/><path d="M 991 175 L 1121 175" fill="none" stroke="#9673a6" stroke-width="2" stroke-miterlimit="10" pointer-events="none" style="stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" font-weight="bold" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="1055.5" y="162.5">TransferService (Domain Service)</text></g></g><g><rect x="991" y="175" width="130" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g fill="#000000" font-family="&quot;Helvetica&quot;" clip-path="url(#mx-clip-995-175-122-50-0)" font-size="9px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="996.5" y="186.5">+ transfer(</text><text x="996.5" y="197.5">   from: Account,</text><text x="996.5" y="208.5">   to: Account,</text><text x="996.5" y="219.5">   amount: Money)</text></g></g><g><rect x="771" y="260" width="220" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 273px; margin-left: 772px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #9673a6; "><div style="display: inline-block; font-size: 14px; font-family: &quot;Helvetica&quot;; color: light-dark(#9673a6, #9577a3); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">When to Use Domain Service:</div></div></div></foreignObject><text x="881" y="277" fill="#9673a6" font-family="&quot;Helvetica&quot;" font-size="14px" text-anchor="middle" font-weight="bold">When to Use Domain Service:</text></switch></g></g><g><rect x="691" y="290" width="250" height="95" rx="14.25" ry="14.25" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 238px; height: 1px; padding-top: 305px; margin-left: 703px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">✓ Operation involves multiple Aggregates<br />✓ Doesn't naturally belong to any Entity<br />✓ Represents a domain concept (verb)<br />✓ Requires external data for calculation<br />✓ Complex domain logic orchestration</div></div></div></foreignObject><text x="703" y="315" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px">✓ Operation involves multiple Aggregates...</text></switch></g></g><g><rect x="981" y="260" width="120" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 273px; margin-left: 982px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #9673a6; "><div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: light-dark(#9673a6, #9577a3); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Characteristics:</div></div></div></foreignObject><text x="1041" y="276" fill="#9673a6" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle" font-weight="bold">Characteristics:</text></switch></g></g><g><rect x="961" y="290" width="140" height="95" rx="14.25" ry="14.25" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 128px; height: 1px; padding-top: 302px; margin-left: 973px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">• Stateless<br />• Named using<br />  Ubiquitous Language<br />• Contains domain<br />  logic (not CRUD)<br />• Can use Repositories</div></div></div></foreignObject><text x="973" y="312" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px">• Stateless...</text></switch></g></g><g><path d="M 691 395 L 881 395 L 911 425 L 911 485 L 691 485 L 691 395 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));"/><path d="M 881 395 L 881 425 L 911 425 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"/><path d="M 881 395 L 881 425 L 911 425" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 213px; height: 1px; padding-top: 442px; margin-left: 698px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Warning: Anemic Domain<br /><br />If most logic is in Domain Services,<br />you may have an Anemic Domain Model.<br />Prefer putting logic in Entities first!</div></div></div></foreignObject><text x="698" y="445" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px">Warning: Anemic Domain...</text></switch></g></g><g><rect x="321" y="470" width="460" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 458px; height: 1px; padding-top: 485px; margin-left: 322px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #333333; "><div style="display: inline-block; font-size: 18px; font-family: &quot;Helvetica&quot;; color: light-dark(#333333, #c1c1c1); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Repository vs Domain Service vs Application Service</div></div></div></foreignObject><text x="551" y="490" fill="#333333" font-family="&quot;Helvetica&quot;" font-size="18px" text-anchor="middle" font-weight="bold">Repository vs Domain Service vs Application Service</text></switch></g></g><g><rect x="1" y="515" width="130" height="35" fill="#333333" stroke="#333333" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 533px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Aspect</div></div></div></foreignObject><text x="66" y="536" fill="#ffffff" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle" font-weight="bold">Aspect</text></switch></g></g><g><rect x="131" y="515" width="260" height="35" fill="#b85450" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(184, 84, 80), rgb(215, 129, 126)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 533px; margin-left: 132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Repository</div></div></div></foreignObject><text x="261" y="536" fill="#ffffff" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle" font-weight="bold">Repository</text></switch></g></g><g><rect x="391" y="515" width="260" height="35" fill="#9673a6" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(150, 115, 166), rgb(149, 119, 163)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 533px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Domain Service</div></div></div></foreignObject><text x="521" y="536" fill="#ffffff" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle" font-weight="bold">Domain Service</text></switch></g></g><g><rect x="651" y="515" width="260" height="35" fill="#6c8ebf" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(108, 142, 191), rgb(92, 121, 163)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 533px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: &quot;Helvetica&quot;; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Application Service</div></div></div></foreignObject><text x="781" y="536" fill="#ffffff" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle" font-weight="bold">Application Service</text></switch></g></g><g><rect x="1" y="550" width="130" height="40" fill="#f5f5f5" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 570px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Purpose</div></div></div></foreignObject><text x="66" y="573" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Purpose</text></switch></g></g><g><rect x="131" y="550" width="260" height="40" fill="#f8cecc" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 570px; margin-left: 132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Persist and retrieve Aggregates</div></div></div></foreignObject><text x="261" y="573" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Persist and retrieve Aggregates</text></switch></g></g><g><rect x="391" y="550" width="260" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 570px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Domain logic that spans entities</div></div></div></foreignObject><text x="521" y="573" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Domain logic that spans entities</text></switch></g></g><g><rect x="651" y="550" width="260" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 570px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Orchestrate use cases, coordinate</div></div></div></foreignObject><text x="781" y="573" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Orchestrate use cases, coordinate</text></switch></g></g><g><rect x="1" y="590" width="130" height="40" fill="#f5f5f5" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 610px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Contains</div></div></div></foreignObject><text x="66" y="613" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Contains</text></switch></g></g><g><rect x="131" y="590" width="260" height="40" fill="#f8cecc" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 610px; margin-left: 132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Data access logic, mapping</div></div></div></foreignObject><text x="261" y="613" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Data access logic, mapping</text></switch></g></g><g><rect x="391" y="590" width="260" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 610px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Business/domain logic</div></div></div></foreignObject><text x="521" y="613" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Business/domain logic</text></switch></g></g><g><rect x="651" y="590" width="260" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 610px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Transaction management, security</div></div></div></foreignObject><text x="781" y="613" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Transaction management, security</text></switch></g></g><g><rect x="1" y="630" width="130" height="40" fill="#f5f5f5" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 650px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Layer</div></div></div></foreignObject><text x="66" y="653" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Layer</text></switch></g></g><g><rect x="131" y="630" width="260" height="40" fill="#f8cecc" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 650px; margin-left: 132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Domain / Infrastructure</div></div></div></foreignObject><text x="261" y="653" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Domain / Infrastructure</text></switch></g></g><g><rect x="391" y="630" width="260" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 650px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Domain</div></div></div></foreignObject><text x="521" y="653" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Domain</text></switch></g></g><g><rect x="651" y="630" width="260" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 650px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Application</div></div></div></foreignObject><text x="781" y="653" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle">Application</text></switch></g></g><g><rect x="1" y="670" width="130" height="40" fill="#f5f5f5" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 690px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Example</div></div></div></foreignObject><text x="66" y="693" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Example</text></switch></g></g><g><rect x="131" y="670" width="260" height="40" fill="#f8cecc" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 690px; margin-left: 132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Courier New&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">OrderRepository.findById()</div></div></div></foreignObject><text x="261" y="693" fill="light-dark(#000000, #ffffff)" font-family="&quot;Courier New&quot;" font-size="10px" text-anchor="middle">OrderRepository.findById()</text></switch></g></g><g><rect x="391" y="670" width="260" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 690px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Courier New&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PricingService.calculateTotal()</div></div></div></foreignObject><text x="521" y="693" fill="light-dark(#000000, #ffffff)" font-family="&quot;Courier New&quot;" font-size="10px" text-anchor="middle">PricingService.calculateTotal()</text></switch></g></g><g><rect x="651" y="670" width="260" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 690px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Courier New&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PlaceOrderUseCase.execute()</div></div></div></foreignObject><text x="781" y="693" fill="light-dark(#000000, #ffffff)" font-family="&quot;Courier New&quot;" font-size="10px" text-anchor="middle">PlaceOrderUseCase.execute()</text></switch></g></g><g><rect x="941" y="470" width="100" height="25" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 483px; margin-left: 942px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #333333; "><div style="display: inline-block; font-size: 14px; font-family: &quot;Helvetica&quot;; color: light-dark(#333333, #c1c1c1); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Typical Flow</div></div></div></foreignObject><text x="991" y="487" fill="#333333" font-family="&quot;Helvetica&quot;" font-size="14px" text-anchor="middle" font-weight="bold">Typical Flow</text></switch></g></g><g><rect x="921" y="510" width="80" height="40" rx="6" ry="6" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 530px; margin-left: 922px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Application<br />Service</div></div></div></foreignObject><text x="961" y="533" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Application...</text></switch></g></g><g><rect x="1021" y="510" width="80" height="40" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" pointer-events="all" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 530px; margin-left: 1022px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Repository</div></div></div></foreignObject><text x="1061" y="533" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Repository</text></switch></g></g><g><rect x="971" y="580" width="80" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 600px; margin-left: 972px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Aggregate</div></div></div></foreignObject><text x="1011" y="603" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Aggregate</text></switch></g></g><g><rect x="971" y="650" width="80" height="40" rx="6" ry="6" fill="#e1d5e7" stroke="#9673a6" pointer-events="all" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 670px; margin-left: 972px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: &quot;Helvetica&quot;; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Domain<br />Service</div></div></div></foreignObject><text x="1011" y="673" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="10px" text-anchor="middle" font-weight="bold">Domain...</text></switch></g></g><g><path d="M 1001 530 L 1012.76 530" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/><path d="M 1018.76 530 L 1010.76 534 L 1012.76 530 L 1010.76 526 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><path d="M 1061 550 L 1018.06 575.76" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/><path d="M 1012.92 578.85 L 1017.72 571.3 L 1018.06 575.76 L 1021.84 578.16 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><path d="M 1011 620 L 1011 641.76" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/><path d="M 1011 647.76 L 1007 639.76 L 1011 641.76 L 1015 639.76 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><path d="M 971 670 Q 971 670 939.68 607.37" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/><path d="M 937 602 L 944.16 607.37 L 939.68 607.37 L 937 610.94 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><path d="M 936 600 L 963.85 615.91" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/><path d="M 969.06 618.89 L 960.13 618.39 L 963.85 615.91 L 964.1 611.45 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(51, 51, 51), rgb(193, 193, 193)); stroke: light-dark(rgb(51, 51, 51), rgb(193, 193, 193));"/></g><g><rect x="1001" y="500" width="35" height="15" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 33px; height: 1px; padding-top: 508px; margin-left: 1002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 8px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">1. fetch</div></div></div></foreignObject><text x="1019" y="510" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="8px" text-anchor="middle">1. fetch</text></switch></g></g><g><rect x="1051" y="555" width="40" height="15" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 563px; margin-left: 1052px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 8px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">2. return</div></div></div></foreignObject><text x="1071" y="565" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="8px" text-anchor="middle">2. return</text></switch></g></g><g><rect x="1021" y="625" width="30" height="15" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 633px; margin-left: 1022px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #666666; "><div style="display: inline-block; font-size: 8px; font-family: &quot;Helvetica&quot;; color: light-dark(#666666, #959595); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">3. call</div></div></div></foreignObject><text x="1036" y="635" fill="#666666" font-family="&quot;Helvetica&quot;" font-size="8px" text-anchor="middle">3. call</text></switch></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>