<mxfile host="65bd71144e">
    <diagram id="aggregate-design" name="Aggregate Design Rules">
        <mxGraphModel dx="1222" dy="542" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="ðŸŽ¨ Aggregate Design - Rules and Best Practices" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="400" y="20" width="500" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="subtitle" value="Aggregates define consistency and transactional boundaries in your domain" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="400" y="55" width="500" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="structure-title" value="Aggregate Structure" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="180" y="90" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="agg-boundary" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=3;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="130" width="400" height="320" as="geometry"/>
                </mxCell>
                <mxCell id="agg-label" value="AGGREGATE BOUNDARY" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="180" y="140" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="consistency-label" value="(Consistency Boundary)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="200" y="158" width="160" height="15" as="geometry"/>
                </mxCell>
                <mxCell id="agg-root" value="ðŸ“¦ Order (Aggregate Root)" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="160" y="185" width="240" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="root-id" value="- orderId: OrderId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="agg-root" vertex="1">
                    <mxGeometry y="26" width="240" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="root-customer" value="- customerId: CustomerId (reference by ID)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="agg-root" vertex="1">
                    <mxGeometry y="44" width="240" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="root-status" value="- status: OrderStatus" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="agg-root" vertex="1">
                    <mxGeometry y="62" width="240" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="root-methods" value="+ addItem(), confirm(), cancel()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;fontStyle=2;" parent="agg-root" vertex="1">
                    <mxGeometry y="80" width="240" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="internal-entity" value="ðŸ“¦ OrderLine (Entity)" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=24;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="120" y="310" width="160" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="line-id" value="- lineId: LineId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="internal-entity" vertex="1">
                    <mxGeometry y="24" width="160" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="line-product" value="- productId: ProductId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="internal-entity" vertex="1">
                    <mxGeometry y="42" width="160" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="line-qty" value="- quantity: int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=10;" parent="internal-entity" vertex="1">
                    <mxGeometry y="60" width="160" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="vo-money" value="Money (VO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="300" y="310" width="80" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="vo-address" value="Address (VO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="300" y="355" width="80" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="vo-date" value="DateRange (VO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="390" y="310" width="80" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="root-to-line" value="" style="endArrow=diamond;endFill=1;html=1;strokeWidth=2;strokeColor=#333333;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agg-root" target="internal-entity" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="root-to-vo" value="" style="endArrow=diamond;endFill=1;html=1;strokeWidth=2;strokeColor=#333333;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="agg-root" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="320" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="entry-arrow" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#82b366;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="agg-root" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="50" y="235" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="entry-label" value="Only entry&#xa;point" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#82b366;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="200" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="blocked-arrow" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#b85450;dashed=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="internal-entity" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="50" y="350" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="blocked-x" value="X" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="70" y="335" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="blocked-label" value="Direct access&#xa;forbidden" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#b85450;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="365" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="rules-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="520" y="90" width="500" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="rules-title" value="Aggregate Design Rules" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="670" y="100" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="rule1" value="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#6c8ebf;strokeColor=#6c8ebf;fontColor=#ffffff;fontStyle=1;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="540" y="140" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule1-title" value="Reference Other Aggregates by ID Only" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="575" y="140" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule1-desc" value="Never hold direct object references to other aggregates.&#xa;Use IDs (CustomerId, ProductId) instead." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="575" y="165" width="420" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="rule2" value="2" style="ellipse;whiteSpace=wrap;html=1;fillColor=#82b366;strokeColor=#82b366;fontColor=#ffffff;fontStyle=1;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="540" y="205" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule2-title" value="One Transaction per Aggregate" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="575" y="205" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule2-desc" value="Modify only one aggregate per transaction. Use eventual&#xa;consistency (Domain Events) for cross-aggregate updates." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="575" y="230" width="420" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="rule3" value="3" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d79b00;strokeColor=#d79b00;fontColor=#ffffff;fontStyle=1;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="540" y="270" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule3-title" value="Keep Aggregates Small" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="575" y="270" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule3-desc" value="Only include what&#39;s needed to enforce invariants.&#xa;Large aggregates cause lock contention and performance issues." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="575" y="295" width="420" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="rule4" value="4" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;fontColor=#ffffff;fontStyle=1;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="540" y="335" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule4-title" value="Protect Invariants Through the Root" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="575" y="335" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule4-desc" value="All business rules are enforced by the Aggregate Root.&#xa;Internal entities cannot be modified directly from outside." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="575" y="360" width="420" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="rule5" value="5" style="ellipse;whiteSpace=wrap;html=1;fillColor=#9673a6;strokeColor=#9673a6;fontColor=#ffffff;fontStyle=1;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="540" y="400" width="25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule5-title" value="Design Around Invariants" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="575" y="400" width="280" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="rule5-desc" value="Group entities/VOs based on business rules that must be&#xa;enforced together, not on data relationships." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="575" y="425" width="420" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="example-title" value="Example: Right vs Wrong Aggregate Design" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="520" y="480" width="340" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="80" y="520" width="440" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-title" value="WRONG - Aggregate Too Large" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="200" y="530" width="200" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-agg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="560" width="400" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-customer" value="Customer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="250" y="575" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-orders" value="Orders[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="120" y="620" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-payment" value="Payments[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="210" y="620" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-addresses" value="Addresses[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="300" y="620" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-reviews" value="Reviews[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="390" y="620" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="wrong-issues" value="Problems:&#xa;â€¢ Huge lock scope&#xa;â€¢ Load entire graph&#xa;â€¢ Can&#39;t scale orders independently&#xa;â€¢ High contention" style="text;html=1;strokeColor=default;fillColor=#ffffff;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;spacingLeft=5;spacingTop=3;" parent="1" vertex="1">
                    <mxGeometry x="120" y="655" width="180" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="right-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="560" y="520" width="460" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="right-title" value="CORRECT - Smaller Aggregates" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="690" y="530" width="200" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="right-customer-agg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="580" y="560" width="100" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="right-customer" value="Customer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="595" y="575" width="70" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="right-customer-profile" value="Profile (VO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=8;" parent="1" vertex="1">
                    <mxGeometry x="595" y="605" width="70" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="right-order-agg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="695" y="560" width="100" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="right-order" value="Order" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="720" y="575" width="60" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="right-orderlines" value="Lines[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=8;" parent="1" vertex="1">
                    <mxGeometry x="720" y="605" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="right-payment-agg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="810" y="560" width="90" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="right-payment" value="Payment" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="825" y="575" width="60" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="right-payment-trans" value="orderId" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=8;" parent="1" vertex="1">
                    <mxGeometry x="825" y="605" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="right-review-agg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="915" y="560" width="90" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="right-review" value="Review" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="930" y="575" width="60" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="right-review-ref" value="customerId" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=8;" parent="1" vertex="1">
                    <mxGeometry x="930" y="605" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="ref-arrow1" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#666666;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="right-order" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="680" y="587" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="ref-label1" value="by ID" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="685" y="575" width="30" height="15" as="geometry"/>
                </mxCell>
                <mxCell id="right-benefits" value="Benefits:&#xa;â€¢ Independent scaling&#xa;â€¢ Smaller transactions&#xa;â€¢ Less lock contention&#xa;â€¢ Clear boundaries" style="text;html=1;strokeColor=default;fillColor=#ffffff;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;spacingLeft=5;spacingTop=3;" parent="1" vertex="1">
                    <mxGeometry x="580" y="640" width="150" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="event-box" value="Domain Events for&#xa;cross-aggregate communication" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=9;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="750" y="655" width="150" height="40" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>